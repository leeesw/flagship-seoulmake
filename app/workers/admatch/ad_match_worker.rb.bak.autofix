module Admatch\n  class AdMatchWorker\n    include Sidekiq::Worker\n    sidekiq_options queue: :admatch\n    def perform(post_id)\n      p = Post.find(post_id)\n      AdMatchLog.create!(post_id: p.id, merchant: 'auto', position: 'after_p2', decision: 'applied', reason: 'rule:category')\n      PostsOpsStep.upsert_step(post_id: p.id, step: 'ad_match', version: '1.0.0')\n    end\n  end\nend\n\n